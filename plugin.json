{
  "id": "mermaid-diagram-satware-ai",
  "title": "satwareÂ® AI Mermaid",
  "emoji": "ðŸ§©",
  "iconURL": "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f9dc-200d-2640-fe0f.svg",
  "author": {
    "name": "satware AG",
    "url": "https://satware.ai"
  },
  "description": "Mermaid ist ein textbasiertes Tool, um Diagramme und Visualisierungen mit einfacher Syntax zu erstellen. Es ermÃ¶glicht die schnelle Erstellung von Flussdiagrammen, Sequenzdiagrammen, Gantt-Diagrammen und mehr direkt aus Textbeschreibungen.",
  "version": "1.0.0",
  "function_name": "render_mermaid_diagram",
  "function_description": "Generate a diagram using Mermaid.",
  "parameters": {
    "type": "object",
    "required": [
      "title",
      "source"
    ],
    "properties": {
      "title": {
        "type": "string",
        "description": "The title of the diagram."
      },
      "source": {
        "type": "string",
        "description": "The Mermaid diagram source in raw text to render."
      }
    }
  },
  "output": "render_html",
  "context": {
    "type": "static",
    "content": "# âš ï¸ MANDATORY IMPLEMENTATION REQUIREMENTS âš ï¸\n# Mermaid.js v11.6 â€“ Complete Diagram Syntax & Requirements\n\n**IMPORTANT: The following instructions are NOT guidelines but STRICT REQUIREMENTS. Failure to adhere to these specifications will result in diagram rendering failures. Each syntax rule MUST be followed exactly as specified.**\n\n## 1. Supported Diagram Types\n\n| Type                | Prefix (REQUIRED)       | Use Case / Notes                   |\n|---------------------|------------------------|------------------------------------|\n| Flowchart           | `flowchart TD/LR`      | Process flows, logic               |\n| Sequence            | `sequenceDiagram`      | Interactions/timing                |\n| Gantt               | `gantt`                | Project timelines                  |\n| Class               | `classDiagram`         | UML class structures               |\n| Gitgraph            | `gitGraph`             | Git branching/history              |\n| Entity Relationship | `erDiagram`            | Database relationships             |\n| User Journey        | `journey`              | Experience mapping                 |\n| Quadrant Chart      | `quadrantChart`        | Prioritization matrices            |\n| Pie Chart           | `pie`                  | Proportional data                  |\n| Timeline            | `timeline`             | Chronological events               |\n| Mindmap            | `mindmap`             |  Mindmaps - The syntax is stable except for the icon integration which is the experimental part            |\n\n**Experimental/Beta Types (EXACT PREFIX REQUIRED):**\n- Block Diagram:  `block-beta` (**Important:** Do not use `block-beta` Diagram Type!)\n- Architecture:  `architecture-beta`\n- Radar Chart:  `radar-beta`\n- XY Chart:     `xychart-beta`\n- Sankey:        `sankey-beta`\n- Packet:        `packet-beta`\n\n**IMPORTANT: Using an incorrect prefix will cause complete rendering failure.**\n\n---\n\n## 2. REQUIRED Syntax Principles\n\n- **âš ï¸ Prefix:** MUST start with the exact diagram type. This is NON-NEGOTIABLE.\n- **âš ï¸ Labels:** MUST use double quotes for spaces/special chars.\n  - Example: node1[\"Label with spaces\"]\n- **âš ï¸ Multiline labels:** MUST use line breaks inside quotes.\n  - Example:\n    ```\n    node1[\"Line 1\n    Line 2\"]\n    ```\n- **âš ï¸ Markdown in labels:** MUST use backticks inside double quotes.\n  - Example:\n    ```\n    flowchart LR\n    markdown[\"`This **is** _Markdown_`\"]\n    ```\n- **âš ï¸ NO HTML tags** are allowed in node definitions. Will cause rendering failure.\n- **âš ï¸ Styling:** MUST use style/classDef after nodes/connections.\n  - Example: style NodeName fill:#color,stroke:#color,font-family:FontName;\n- **âš ï¸ Comments:** MUST start with %%.\n\n**FAILURE TO FOLLOW THESE SYNTAX RULES WILL PREVENT DIAGRAM RENDERING.**\n\n---\n\n## 3. MANDATORY Diagram-Specific Instructions\n\n### XY Chart (`xychart-beta`)\nVisualizes bar/line charts on x/y axes.\n\n```mermaid\nxychart-beta\n    title \"Sales Performance\"\n    x-axis [Jan, Feb, Mar]\n    y-axis \"Revenue (USD)\" 4000 --> 7000\n    bar [5000, 6000, 6500]\n    line [4500, 5500, 6200]\n```\n\n**REQUIRED options:**  \nwidth (default:700), height (default:500), chartOrientation (vertical/horizontal), plotReservedSpacePercent  \nAxes MUST be customized via config objects for labels/ticks/font size/etc.\n\n[Docs](https://mermaid.js.org/syntax/xyChart.html) â€¢ [Config](https://mermaid.js.org/config/schema-docs/config-defs-xychart-config.html)\n\n---\n\n### Sankey Diagram (`sankey-beta`)\nShows proportional flows between nodes using CSV-like syntax.\n\n```mermaid\nsankey-beta\nSourceA,TargetA,10\nSourceA,TargetB,5\nTargetA,FinalNode,8\nTargetB,FinalNode,7\n```\n\n**MANDATORY Rules:**\n- **Data lines MUST immediately follow `sankey-beta` keyword.** No leading whitespace or extra characters on the line directly after the prefix.\n- **Data MUST be in strict CSV format with EXACTLY 3 columns:** `source`, `target`, `value`.\n- **NO circular flows allowed** (will cause rendering failure).\n- **MUST use unique node names per stage.**\n- **Values MUST be positive integers.**\n- **Commas in labels MUST be wrapped in double quotes** (e.g., `\"Label,WithComma\"`).\n- **Double quotes in labels MUST be escaped by doubling them within a quoted string** (e.g., `\"Label with \"\"quotes\"\"\"`).\n\nConfigurable options include linkColor (`source`, `target`, or hex), nodeAlignment (`left`, `right`, etc.).\n\n[Docs](https://mermaid.js.org/syntax/sankey.html)\n\n---\n\n### Packet Diagram (`packet-beta`)\nVisualizes network packet fields by bit range.\n\n```mermaid\npacket-beta\n0-15: \"Source Port\"\n16-31: \"Destination Port\"\n32-63: \"Sequence Number\"\n64-95: \"Acknowledgment Number\"\n```\n\n**REQUIRED Format:**\nEach line MUST define a field by bit range and label. Single bits MUST use e.g., `7:\"Flag\"`.  \nSupports both single-bit and multi-bit ranges.\n\n[Docs](https://mermaid.js.org/syntax/packet.html)\n\n---\n\n### Block Diagram (`block-beta`)\nGrid-based layout for system architecture/org charts.\n\n```mermaid\nblock-beta\ncolumns 3\nClient[\"Client\"] API[\"API\"] space \nspace Service[\"Service\"] space \nDB[\"Database\"] Cache[\"Cache\"] Logger[\"Logger\"] \n\nClient --> API \nAPI --> Service \nService --> DB \nService --> Cache \n\nstyle DB fill:#f9f9f9,color:#333;\n```\n\n**MANDATORY Rules:**\n1.  **Block IDs in grid**: Use `ID[\"Display Text\"]` for blocks to ensure proper rendering of spaces. ONLY plain text IDs (e.g., `Client`, `API`) are used for connections and styling. NO shape brackets (e.g., `[]`, `(())`) are allowed directly in the grid definition for the ID itself, only for the display text.\n2.  **No labels on arrows**: Arrows in `block-beta` diagrams **DO NOT support labels**. Any text on arrows will cause a rendering error. Connections are simple `Source --> Target`.\n3.  Connections/styles MUST be defined after grid layout.\n4.  MUST use `space` as placeholder for empty cells.\n\n[Docs](https://github.com/mermaid-js/mermaid/discussions/5135)\n\n---\n\n## 4. REQUIRED Flowchart Node Shapes & Links\n\n**âš ï¸ Shapes Examples (MUST follow exact syntax)**\n```\nid[Text]          # Rectangle  \nid((Text))        # Circle  \nid(((Text)))      # Double circle  \nid[(Text)]        # Cylinder/db  \nid{Text}          # Diamond/rhombus  \nid[/Text/]        # Parallelogram  \n```\n\n**âš ï¸ Links Examples (MUST follow exact syntax)**\n```\nA-->B             # Arrow   \nA---B             # Open line   \nA-.->B            # Dotted arrow   \nA==>B             # Thick arrow   \nA<<-->>B          # Bidirectional   \nA~~~B             # Invisible link   \n# Add text on links as needed using -->|\"text\"| or -- text -->\n```\n**NOTE**: The syntax for adding text on links (`-->|\"text\"|` or `-- text -->`) **DOES NOT apply to `block-beta` diagrams**. Arrows in `block-beta` diagrams do not support labels.\n\n**SYNTAX DEVIATION WILL RESULT IN FAILED RENDERING.**\n\n---\n\n## 5. CRITICAL Error Prevention & Verification Checklist\n\n### MANDATORY Best Practices\n\nâ˜‘ Start simpleâ€”test incrementally (REQUIRED)  \nâ˜‘ Unique IDs for all nodes/entities (MANDATORY)  \nâ˜‘ Proper spacing and section breaks (REQUIRED)  \nâ˜‘ Split complex/bidirectional/cyclic relations into distinct steps/names (MANDATORY)\n\n### REQUIRED Pre-submission Verification Checklist\n\n#### All diagrams (MUST verify):\nâ˜‘ Correct prefix  \nâ˜‘ Unique IDs  \nâ˜‘ Proper quoting  \nâ˜‘ Matched structures  \nâ˜‘ No cycles unless allowed\n\n#### Flowcharts (MUST verify):\nâ˜‘ Direction set  \nâ˜‘ Bracketed shapes  \nâ˜‘ Valid arrows/connections\n\n#### Sankey (MUST verify):\nâ˜‘ **Data lines immediately follow `sankey-beta` with no leading whitespace or extra characters.**\nâ˜‘ **Strict `source,target,value` CSV format with exactly 3 columns.**\nâ˜‘ No cycles.\nâ˜‘ Unique stage names.\nâ˜‘ Values are positive integers.\nâ˜‘ **Labels with commas are correctly wrapped in double quotes.**\nâ˜‘ **Labels with double quotes are correctly escaped by doubling them within a quoted string.**\n\n#### ER (MUST verify):\nâ˜‘ Cardinality syntax correct  \nâ˜‘ Relationships separated from attributes\n\n#### Block-beta (MUST verify):\nâ˜‘ Columns set first  \nâ˜‘ Plain IDs only in grid  \nâ˜‘ Connections/styles after grid\nâ˜‘ **No labels on arrows** (as explicitly stated in Section 3 for `block-beta`)\nâ˜‘ **Block IDs use `ID[\"Display Text\"]` for proper display of spaces** (as explicitly stated in Section 3 for `block-beta`)\n\n#### XYChart (MUST verify):\nâ˜‘ Prefix is xychart-beta  \nâ˜‘ Axes labeled correctly  \nâ˜‘ Data arrays match axis ticks\n\n#### Packet (MUST verify):\nâ˜‘ Prefix is packet-beta  \nâ˜‘ Bit ranges valid/non-overlapping  \nâ˜‘ All fields labeled\n\n**IMPORTANT: This verification is NOT optional. Skipping verification will lead to rendering failures.**\n\n---\n\n## Common Rendering Failures\n\n| Requirement Violation | Direct Result |\n|----------------------|---------------|\n| Missing diagram prefix | Complete rendering failure |\n| Incorrect quoting of labels | Syntax errors, partial rendering |\n| Circular references in diagrams | \"Circular link\" errors |\n| Missing node definitions | Disconnected elements |\n| HTML in node definitions | Parsing errors |\n| Incorrect shape syntax | Node rendering failures |\n| Invalid bit ranges in Packet diagrams | Parsing error |\n| Missing columns definition in Block diagram | Layout failure |\n| **Labels on `block-beta` arrows** | **Lexical error, complete rendering failure** |\n| **Underscores in `block-beta` block display text (if `ID` used directly)** | **Underscores displayed instead of spaces** |\n| **Sankey: Data not immediately following `sankey-beta` keyword** | **Parse error, complete rendering failure** |\n| **Sankey: Malformed CSV (e.g., incorrect number of columns)** | **Parse error, complete rendering failure** |\n| **Sankey: Incorrect comma or double quote escaping in labels** | **Parse error, complete rendering failure** |\n\n**CRITICAL: These errors CANNOT be fixed by the rendering engine and WILL result in complete diagram failure.**\n\n---\n\n## FINAL VERIFICATION CHECKLIST\n\nBefore submitting your diagram for rendering, you MUST verify:\n\nâ–¡ Diagram prefix is EXACT and matches intended diagram type\nâ–¡ All syntax follows the MANDATORY specifications above\nâ–¡ All nodes referenced in relationships are properly defined\nâ–¡ All special characters in labels are properly quoted\nâ–¡ No HTML tags are used in node definitions\nâ–¡ No circular references exist (unless allowed by diagram type)\nâ–¡ All required components are present for the specific diagram type\nâ–¡ **For `sankey-beta` diagrams, data lines immediately follow the keyword with no leading whitespace or extra characters.**\nâ–¡ **For `sankey-beta` diagrams, labels with commas or double quotes are correctly escaped.**\n\n**REMEMBER: These are not guidelines but REQUIREMENTS for successful rendering.**"
  }
}
